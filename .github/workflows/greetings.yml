name: Notify on Feature Push

on:
  push:
    branches:
      - feature/**  # Aciona o workflow apenas para branches que comeÃ§am com "feature/"

jobs:
  notify:
    runs-on: ubuntu-latest
    permissions:
      issues: write  # NecessÃ¡rio para criar issues
    steps:
      - name: Send Notification
        uses: actions/github-script@v6
        with:
          script: |
            const branchName = context.ref.replace('refs/heads/', '');
            const message = `
            ðŸš€ **Push Detetado** na branch: \`${branchName}\` ðŸŽ‰  
            Lembre-se de abrir um Pull Request quando terminar, para a branch \`testes\` ðŸ˜Š
            `;
            await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: `Novo Push na Branch ${branchName}`,
              body: message,
            });
