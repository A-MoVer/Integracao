{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nimport _imports_0 from '@/assets/icon.png';\nimport _imports_1 from '@/assets/perfil.png';\nconst _hoisted_1 = {\n  class: \"navbar\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"recipe-detail\"\n};\nconst _hoisted_3 = {\n  class: \"comments-section\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"comment-list\"\n};\nconst _hoisted_5 = {\n  class: \"comment-author\"\n};\nconst _hoisted_6 = {\n  class: \"comment-text\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"header\", _hoisted_1, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"logo-container\"\n  }, [_createElementVNode(\"img\", {\n    src: _imports_0,\n    alt: \"Logo EuCozinho\",\n    class: \"logo\"\n  }), _createElementVNode(\"h1\", null, \"EuCozinho\")], -1 /* HOISTED */)), _createElementVNode(\"nav\", null, [_createVNode(_component_router_link, {\n    to: \"/home\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"Receitas\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: {\n      name: 'ChefDetail',\n      params: {\n        id: 1\n      }\n    }\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"Chefes\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: \"/profile\",\n    class: \"profile-icon\"\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createElementVNode(\"img\", {\n      src: _imports_1,\n      alt: \"Perfil\"\n    }, null, -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"Logout\")])),\n    _: 1 /* STABLE */\n  })])]), $data.receita ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"h1\", null, _toDisplayString($data.receita.title) + \" - por \" + _toDisplayString($data.nomeCriador || 'Autor desconhecido'), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($data.receita.description), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", null, \"Comentários\", -1 /* HOISTED */)), $data.comentarios.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.comentarios, (comentario, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: comentario.id || index,\n      class: \"comment-item\"\n    }, [_createElementVNode(\"p\", _hoisted_5, _toDisplayString(comentario.author), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(comentario.text), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.novoComentario = $event),\n    placeholder: \"Adicione um comentário...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.novoComentario]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.adicionarComentario && $options.adicionarComentario(...args))\n  }, \"Enviar Comentário\")])]);\n}","map":{"version":3,"names":["_imports_0","_imports_1","class","key","_createElementBlock","_createElementVNode","_hoisted_1","src","alt","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","name","params","id","$data","receita","_hoisted_2","_toDisplayString","title","nomeCriador","description","_createCommentVNode","_hoisted_3","comentarios","length","_hoisted_4","_Fragment","_renderList","comentario","index","_hoisted_5","author","_hoisted_6","text","$event","novoComentario","placeholder","onClick","args","$options","adicionarComentario"],"sources":["C:\\Users\\Diogo Resende\\Desktop\\DWA\\G7_24-25\\G7_24-25\\Receitas\\frontend\\src\\components\\ReceitasDetalhe.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <header class=\"navbar\">\r\n      <div class=\"logo-container\">\r\n        <img src=\"@/assets/icon.png\" alt=\"Logo EuCozinho\" class=\"logo\" />\r\n        <h1>EuCozinho</h1>\r\n      </div>\r\n      <nav>\r\n        <router-link to=\"/home\">Receitas</router-link>\r\n        <router-link :to=\"{ name: 'ChefDetail', params: { id: 1 } }\">Chefes</router-link>\r\n        <router-link to=\"/profile\" class=\"profile-icon\">\r\n          <img src=\"@/assets/perfil.png\" alt=\"Perfil\" />\r\n        </router-link>\r\n        <router-link to=\"/\">Logout</router-link>\r\n      </nav>\r\n    </header>\r\n\r\n    <div class=\"recipe-detail\" v-if=\"receita\">\r\n      <h1>{{ receita.title }} - por {{ nomeCriador || 'Autor desconhecido' }}</h1>\r\n      <p>{{ receita.description }}</p>\r\n    </div>\r\n\r\n    <div class=\"comments-section\">\r\n      <h2>Comentários</h2>\r\n      <div v-if=\"comentarios.length > 0\" class=\"comment-list\">\r\n        <div\r\n          v-for=\"(comentario, index) in comentarios\"\r\n          :key=\"comentario.id || index\"\r\n          class=\"comment-item\"\r\n        >\r\n          <p class=\"comment-author\">{{ comentario.author }}</p>\r\n          <p class=\"comment-text\">{{ comentario.text }}</p>\r\n        </div>\r\n      </div>\r\n      <textarea v-model=\"novoComentario\" placeholder=\"Adicione um comentário...\"></textarea>\r\n      <button @click=\"adicionarComentario\">Enviar Comentário</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAuth } from \"firebase/auth\";\r\nimport axios from \"../axios\";\r\n\r\nexport default {\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      receita: null,\r\n      nomeCriador: null,\r\n      comentarios: [],\r\n      novoComentario: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    async carregarInteracoes() {\r\n      try {\r\n        const token = await this.obterTokenFirebase();\r\n        const response = await axios.get(`/interactions/Recipe/${this.id}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        this.comentarios = response.data.map((comment) => ({\r\n          id: comment._id,\r\n          author: comment.user_id?.name || \"Anônimo\",\r\n          text: comment.comment_text,\r\n        }));\r\n      } catch (error) {\r\n        console.error(\"Erro ao carregar interações:\", error);\r\n      }\r\n    },\r\n    async adicionarComentario() {\r\n      if (!this.novoComentario.trim()) {\r\n        alert(\"O comentário não pode estar vazio.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const token = await this.obterTokenFirebase();\r\n        const response = await axios.post(\r\n          \"/interactions\",\r\n          {\r\n            recipe_id: this.id,\r\n            type: \"comment\",\r\n            comment_text: this.novoComentario,\r\n          },\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n\r\n        this.comentarios.push(response.data);\r\n        this.novoComentario = \"\";\r\n      } catch (error) {\r\n        console.error(\"Erro ao adicionar comentário:\", error);\r\n      }\r\n    },\r\n    async obterTokenFirebase() {\r\n      const auth = getAuth();\r\n      const currentUser = auth.currentUser;\r\n      if (currentUser) return await currentUser.getIdToken();\r\n      throw new Error(\"Utilizador não autenticado.\");\r\n    },\r\n  },\r\n  created() {\r\n    this.carregarInteracoes();\r\n  },\r\n};\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}