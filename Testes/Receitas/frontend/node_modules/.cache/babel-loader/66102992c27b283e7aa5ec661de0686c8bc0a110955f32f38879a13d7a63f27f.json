{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport { getAuth } from \"firebase/auth\";\nimport axios from \"../axios\";\nexport default {\n  props: [\"id\"],\n  data() {\n    return {\n      receita: null,\n      nomeCriador: null,\n      comentarios: [],\n      novoComentario: \"\"\n    };\n  },\n  methods: {\n    async carregarInteracoes() {\n      try {\n        const token = await this.obterTokenFirebase();\n        const response = await axios.get(`/interactions/Recipe/${this.id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.comentarios = response.data.map(comment => ({\n          id: comment._id,\n          author: comment.user_id?.name || \"Anônimo\",\n          text: comment.comment_text\n        }));\n      } catch (error) {\n        console.error(\"Erro ao carregar interações:\", error);\n      }\n    },\n    async adicionarComentario() {\n      if (!this.novoComentario.trim()) {\n        alert(\"O comentário não pode estar vazio.\");\n        return;\n      }\n      try {\n        const token = await this.obterTokenFirebase();\n        const response = await axios.post(\"/interactions\", {\n          recipe_id: this.id,\n          type: \"comment\",\n          comment_text: this.novoComentario\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.comentarios.push(response.data);\n        this.novoComentario = \"\";\n      } catch (error) {\n        console.error(\"Erro ao adicionar comentário:\", error);\n      }\n    },\n    async obterTokenFirebase() {\n      const auth = getAuth();\n      const currentUser = auth.currentUser;\n      if (currentUser) return await currentUser.getIdToken();\n      throw new Error(\"Utilizador não autenticado.\");\n    }\n  },\n  created() {\n    this.carregarInteracoes();\n  }\n};","map":{"version":3,"names":["getAuth","axios","props","data","receita","nomeCriador","comentarios","novoComentario","methods","carregarInteracoes","token","obterTokenFirebase","response","get","id","headers","Authorization","map","comment","_id","author","user_id","name","text","comment_text","error","console","adicionarComentario","trim","alert","post","recipe_id","type","push","auth","currentUser","getIdToken","Error","created"],"sources":["C:\\Users\\Diogo Resende\\Desktop\\DWA\\G7_24-25\\G7_24-25\\Receitas\\frontend\\src\\components\\ReceitasDetalhe.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <header class=\"navbar\">\r\n      <div class=\"logo-container\">\r\n        <img src=\"@/assets/icon.png\" alt=\"Logo EuCozinho\" class=\"logo\" />\r\n        <h1>EuCozinho</h1>\r\n      </div>\r\n      <nav>\r\n        <router-link to=\"/home\">Receitas</router-link>\r\n        <router-link :to=\"{ name: 'ChefDetail', params: { id: 1 } }\">Chefes</router-link>\r\n        <router-link to=\"/profile\" class=\"profile-icon\">\r\n          <img src=\"@/assets/perfil.png\" alt=\"Perfil\" />\r\n        </router-link>\r\n        <router-link to=\"/\">Logout</router-link>\r\n      </nav>\r\n    </header>\r\n\r\n    <div class=\"recipe-detail\" v-if=\"receita\">\r\n      <h1>{{ receita.title }} - por {{ nomeCriador || 'Autor desconhecido' }}</h1>\r\n      <p>{{ receita.description }}</p>\r\n    </div>\r\n\r\n    <div class=\"comments-section\">\r\n      <h2>Comentários</h2>\r\n      <div v-if=\"comentarios.length > 0\" class=\"comment-list\">\r\n        <div\r\n          v-for=\"(comentario, index) in comentarios\"\r\n          :key=\"comentario.id || index\"\r\n          class=\"comment-item\"\r\n        >\r\n          <p class=\"comment-author\">{{ comentario.author }}</p>\r\n          <p class=\"comment-text\">{{ comentario.text }}</p>\r\n        </div>\r\n      </div>\r\n      <textarea v-model=\"novoComentario\" placeholder=\"Adicione um comentário...\"></textarea>\r\n      <button @click=\"adicionarComentario\">Enviar Comentário</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAuth } from \"firebase/auth\";\r\nimport axios from \"../axios\";\r\n\r\nexport default {\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      receita: null,\r\n      nomeCriador: null,\r\n      comentarios: [],\r\n      novoComentario: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    async carregarInteracoes() {\r\n      try {\r\n        const token = await this.obterTokenFirebase();\r\n        const response = await axios.get(`/interactions/Recipe/${this.id}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        this.comentarios = response.data.map((comment) => ({\r\n          id: comment._id,\r\n          author: comment.user_id?.name || \"Anônimo\",\r\n          text: comment.comment_text,\r\n        }));\r\n      } catch (error) {\r\n        console.error(\"Erro ao carregar interações:\", error);\r\n      }\r\n    },\r\n    async adicionarComentario() {\r\n      if (!this.novoComentario.trim()) {\r\n        alert(\"O comentário não pode estar vazio.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const token = await this.obterTokenFirebase();\r\n        const response = await axios.post(\r\n          \"/interactions\",\r\n          {\r\n            recipe_id: this.id,\r\n            type: \"comment\",\r\n            comment_text: this.novoComentario,\r\n          },\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n\r\n        this.comentarios.push(response.data);\r\n        this.novoComentario = \"\";\r\n      } catch (error) {\r\n        console.error(\"Erro ao adicionar comentário:\", error);\r\n      }\r\n    },\r\n    async obterTokenFirebase() {\r\n      const auth = getAuth();\r\n      const currentUser = auth.currentUser;\r\n      if (currentUser) return await currentUser.getIdToken();\r\n      throw new Error(\"Utilizador não autenticado.\");\r\n    },\r\n  },\r\n  created() {\r\n    this.carregarInteracoes();\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";;AAyCA,SAASA,OAAM,QAAS,eAAe;AACvC,OAAOC,KAAI,MAAO,UAAU;AAE5B,eAAe;EACbC,KAAK,EAAE,CAAC,IAAI,CAAC;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,IAAI;MACbC,WAAW,EAAE,IAAI;MACjBC,WAAW,EAAE,EAAE;MACfC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,kBAAkBA,CAAA,EAAG;MACzB,IAAI;QACF,MAAMC,KAAI,GAAI,MAAM,IAAI,CAACC,kBAAkB,CAAC,CAAC;QAC7C,MAAMC,QAAO,GAAI,MAAMX,KAAK,CAACY,GAAG,CAAC,wBAAwB,IAAI,CAACC,EAAE,EAAE,EAAE;UAClEC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUN,KAAK;UAAG;QAC9C,CAAC,CAAC;QAEF,IAAI,CAACJ,WAAU,GAAIM,QAAQ,CAACT,IAAI,CAACc,GAAG,CAAEC,OAAO,KAAM;UACjDJ,EAAE,EAAEI,OAAO,CAACC,GAAG;UACfC,MAAM,EAAEF,OAAO,CAACG,OAAO,EAAEC,IAAG,IAAK,SAAS;UAC1CC,IAAI,EAAEL,OAAO,CAACM;QAChB,CAAC,CAAC,CAAC;MACL,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC;IACD,MAAME,mBAAmBA,CAAA,EAAG;MAC1B,IAAI,CAAC,IAAI,CAACpB,cAAc,CAACqB,IAAI,CAAC,CAAC,EAAE;QAC/BC,KAAK,CAAC,oCAAoC,CAAC;QAC3C;MACF;MAEA,IAAI;QACF,MAAMnB,KAAI,GAAI,MAAM,IAAI,CAACC,kBAAkB,CAAC,CAAC;QAC7C,MAAMC,QAAO,GAAI,MAAMX,KAAK,CAAC6B,IAAI,CAC/B,eAAe,EACf;UACEC,SAAS,EAAE,IAAI,CAACjB,EAAE;UAClBkB,IAAI,EAAE,SAAS;UACfR,YAAY,EAAE,IAAI,CAACjB;QACrB,CAAC,EACD;UAAEQ,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUN,KAAK;UAAG;QAAE,CAClD,CAAC;QAED,IAAI,CAACJ,WAAW,CAAC2B,IAAI,CAACrB,QAAQ,CAACT,IAAI,CAAC;QACpC,IAAI,CAACI,cAAa,GAAI,EAAE;MAC1B,EAAE,OAAOkB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACvD;IACF,CAAC;IACD,MAAMd,kBAAkBA,CAAA,EAAG;MACzB,MAAMuB,IAAG,GAAIlC,OAAO,CAAC,CAAC;MACtB,MAAMmC,WAAU,GAAID,IAAI,CAACC,WAAW;MACpC,IAAIA,WAAW,EAAE,OAAO,MAAMA,WAAW,CAACC,UAAU,CAAC,CAAC;MACtD,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;IAChD;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC7B,kBAAkB,CAAC,CAAC;EAC3B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}