{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"recipe-detail\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  class: \"add-comment\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h2\", null, _toDisplayString($data.recipe.title), 1 /* TEXT */), _createElementVNode(\"img\", {\n    src: $data.recipe.image,\n    alt: \"Recipe Image\",\n    class: \"recipe-image\"\n  }, null, 8 /* PROPS */, _hoisted_2), _createElementVNode(\"p\", null, _toDisplayString($data.recipe.description), 1 /* TEXT */), _createElementVNode(\"p\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Likes:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.recipe.likes), 1 /* TEXT */)]), _createCommentVNode(\" Formulário para Adicionar Comentário \"), _createElementVNode(\"div\", _hoisted_3, [_cache[3] || (_cache[3] = _createElementVNode(\"h3\", null, \"Adicionar um comentário\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.newComment = $event),\n    placeholder: \"Escreve o teu comentário aqui\",\n    rows: \"3\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newComment]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.addComment && $options.addComment(...args))\n  }, \"Enviar\")])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","$data","recipe","title","src","image","alt","_hoisted_2","description","_createTextVNode","likes","_createCommentVNode","_hoisted_3","_cache","$event","newComment","placeholder","rows","onClick","args","$options","addComment"],"sources":["C:\\Users\\Diogo Resende\\Desktop\\DWA\\G7_24-25\\G7_24-25\\Receitas\\frontend\\src\\components\\RecipeDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"recipe-detail\">\r\n    <h2>{{ recipe.title }}</h2>\r\n    <img :src=\"recipe.image\" alt=\"Recipe Image\" class=\"recipe-image\" />\r\n    <p>{{ recipe.description }}</p>\r\n    <p><strong>Likes:</strong> {{ recipe.likes }}</p>\r\n    \r\n    <!-- Formulário para Adicionar Comentário -->\r\n    <div class=\"add-comment\">\r\n      <h3>Adicionar um comentário</h3>\r\n      <textarea\r\n        v-model=\"newComment\"\r\n        placeholder=\"Escreve o teu comentário aqui\"\r\n        rows=\"3\"\r\n      ></textarea>\r\n      <button @click=\"addComment\">Enviar</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getReceitaById } from \"@/services/receitas\";\r\nimport axios from \"../axios\";\r\n\r\nexport default {\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      recipe: null,\r\n      comments: [], // Lista de comentários\r\n      newComment: \"\", // Texto do novo comentário\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchRecipeDetail();\r\n    this.fetchComments(); // Buscar os comentários ao carregar o componente\r\n  },\r\n  methods: {\r\n    async fetchRecipeDetail() {\r\n      try {\r\n        this.recipe = await getReceitaById(this.id);\r\n      } catch (error) {\r\n        console.error(\"Erro ao buscar detalhes da receita:\", error);\r\n      }\r\n    },\r\n    async fetchComments() {\r\n      try {\r\n        const response = await axios.get(`/receitas/${this.id}/comments`);\r\n        this.comments = response.data;\r\n      } catch (error) {\r\n        console.error(\"Erro ao buscar comentários:\", error);\r\n      }\r\n    },\r\n    async addComment() {\r\n      if (!this.newComment.trim()) {\r\n        alert(\"O comentário não pode estar vazio.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const token = localStorage.getItem(\"userToken\"); // Busca o token do utilizador autenticado\r\n        const response = await axios.post(\r\n          `/receitas/${this.id}/comments`,\r\n          { text: this.newComment },\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n        this.comments.push(response.data.comment); // Adiciona o novo comentário à lista\r\n        this.newComment = \"\"; // Limpa o campo do formulário\r\n      } catch (error) {\r\n        console.error(\"Erro ao adicionar comentário:\", error);\r\n        alert(\"Erro ao adicionar o comentário. Tenta novamente.\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.recipe-detail {\r\n  padding: 2rem;\r\n}\r\n\r\n.recipe-image {\r\n  width: 100%;\r\n  height: auto;\r\n  margin-top: 1rem;\r\n}\r\n\r\nh2 {\r\n  color: #e74c3c;\r\n}\r\n\r\np {\r\n  font-size: 1.2rem;\r\n  color: #555;\r\n}\r\n\r\n.comments-section {\r\n  margin-top: 2rem;\r\n}\r\n\r\n.comments-section ul {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\n.comments-section li {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.add-comment {\r\n  margin-top: 2rem;\r\n}\r\n\r\ntextarea {\r\n  width: 100%;\r\n  height: 100px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\nbutton {\r\n  padding: 0.5rem 1rem;\r\n  background-color: #e74c3c;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #c0392b;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAe;mBAD5B;;EAQSA,KAAK,EAAC;AAAa;;uBAP1BC,mBAAA,CAgBM,OAhBNC,UAgBM,GAfJC,mBAAA,CAA2B,YAAAC,gBAAA,CAApBC,KAAA,CAAAC,MAAM,CAACC,KAAK,kBACnBJ,mBAAA,CAAmE;IAA7DK,GAAG,EAAEH,KAAA,CAAAC,MAAM,CAACG,KAAK;IAAEC,GAAG,EAAC,cAAc;IAACV,KAAK,EAAC;0BAHtDW,UAAA,GAIIR,mBAAA,CAA+B,WAAAC,gBAAA,CAAzBC,KAAA,CAAAC,MAAM,CAACM,WAAW,kBACxBT,mBAAA,CAAiD,Y,0BAA9CA,mBAAA,CAAuB,gBAAf,QAAM,sBALrBU,gBAAA,CAK8B,GAAC,GAAAT,gBAAA,CAAGC,KAAA,CAAAC,MAAM,CAACQ,KAAK,iB,GAE1CC,mBAAA,0CAA6C,EAC7CZ,mBAAA,CAQM,OARNa,UAQM,G,0BAPJb,mBAAA,CAAgC,YAA5B,yBAAuB,sB,gBAC3BA,mBAAA,CAIY;IAdlB,uBAAAc,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAWiBb,KAAA,CAAAc,UAAU,GAAAD,MAAA;IACnBE,WAAW,EAAC,+BAA+B;IAC3CC,IAAI,EAAC;iDAFIhB,KAAA,CAAAc,UAAU,E,GAIrBhB,mBAAA,CAA2C;IAAlCmB,OAAK,EAAAL,MAAA,QAAAA,MAAA,UAAAM,IAAA,KAAEC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;KAAE,QAAM,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}